---
import BaseLayout from '@/layouts/BaseLayout.astro'; // if you didn't add the @ alias, change to: ../../layouts/BaseLayout.astro
import { getCollection } from 'astro:content';

export const prerender = true;

export async function getStaticPaths() {
  const posts = await getCollection('posts', ({ data }) => !data.draft);
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
const title = `${post.data.title} — Flax Lignan Health`;
const description = post.data.description ?? '';
---

<BaseLayout>
  <article class="post">
    <header class="post-header">
      <h1>{post.data.title}</h1>
      <p class="meta">
        {post.data.date.toLocaleDateString('en-US', { year:'numeric', month:'long', day:'numeric' })}
        {post.data.tags?.length ? ` • ${post.data.tags.join(', ')}` : ''}
      </p>
      {post.data.heroImage && <img class="hero" src={post.data.heroImage} alt="" />}
      {description && <p class="desc">{description}</p>}
    </header>

    <main class="post-body">
      <Content />
    </main>

    <footer class="post-footer">
      <a href="/blog">← Back to Blog</a>
    </footer>
  </article>

  <style>
    .post { max-width: 820px; margin: 1.5rem auto 3rem; padding: 0 1rem; }
    .post-header h1 {
      font-family: 'Source Sans 3','Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      font-weight: 700; font-size: clamp(2rem, 4.6vw, 2.8rem); margin: 0 0 .25rem 0; color:#000;
    }
    .meta { color:#555; margin: 0 0 .5rem 0; font-size: .95rem; }

