---
const title = "Blog | Flax Lignan Health";

// Load all Markdown posts in this folder (./*.md)
const modules = import.meta.glob('./*.md', { eager: true });

// Convert to an array with urls + frontmatter
const posts = Object.entries(modules).map(([path, mod]: any) => {
  const url = path.replace('./', '/blog/').replace('.md', '');
  return { url, ...mod.frontmatter };
});

// Sort newest first (by date in frontmatter)
posts.sort((a, b) => new Date(b.date) - new Date(a.date));
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{title}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preload" href="/fonts/GENUINE.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="stylesheet" href="/global.css">
  </head>

  <body class="min-h-screen">
    <!-- Header (same as other pages) -->
    <header style="max-width:1100px;margin:1rem auto;padding:0 1rem;">
      <div style="display:flex;align-items:center;gap:24px;justify-content:flex-start;">
        <a href="/" class="logo-link" style="display:inline-flex;align-items:center;gap:.5rem;text-decoration:none;color:inherit">
          <img src="/images/logo.png" alt="Flax Lignan Health" style="height:40px;width:auto;display:block" />
          <span class="logo-text">Flax Lignan Health</span>
        </a>

        <nav style="display:flex;gap:16px;">

          <a href="/products">Products</a>
          <a href="/blog">Blog</a>
        </nav>
      </div>
    </header>

    <main style="max-width:1100px;margin:2rem auto;padding:0 1rem;">
      <h1 class="products-title">Blog Updates</h1>
      <p>Latest specials, health tips, and product news.</p>

      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;margin-top:1rem;">
        {posts.map((post) => (
          <a href={post.url} style="display:block;border:1px solid #e5e7eb;border-radius:12px;overflow:hidden;text-decoration:none;color:inherit;">
            {post.cover && (
              <img src={post.cover} alt={post.title} style="width:100%;height:140px;object-fit:cover;display:block;" />
            )}
            <div style="padding:12px 14px;">
              <h2 style="margin:0 0 6px 0;font-size:1.1rem;font-weight:600;">{post.title}</h2>
              <div style="font-size:.9rem;opacity:.75;margin-bottom:8px;">
                {new Date(post.date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: '2-digit' })}
              </div>
              <p style="margin:0;font-size:.95rem;opacity:.9;">{post.summary}</p>
            </div>
          </a>
        ))}
      </div>
    </main>
  </body>
</html>
