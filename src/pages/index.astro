---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('posts', ({ data }) => !data.draft))
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
const title = "Blog — Flax Lignan Health";
---

<BaseLayout>
  <header class="blog-header">
    <h1>Blog</h1>
    <p>Articles, specials, and research notes from Flax Lignan Health.</p>
    <p><a class="back-home" href="/">← Back to Home</a></p>
  </header>

  <main class="blog-main">
    {posts.length === 0 ? (
      <p>No posts yet. Check back soon.</p>
    ) : (
      posts.map((post) => (
        <article class="post-card">
          <h2><a href={`/blog/${post.slug}/`}>{post.data.title}</a></h2>
          <p class="meta">
            {post.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
            {post.data.tags && post.data.tags.length ? ` • ${post.data.tags.join(', ')}` : ''}
          </p>
          {post.data.description && <p>{post.data.description}</p>}
        </article>
      ))
    )}
  </main>

  <style>
    .blog-header {
      max-width: 1100px; margin: 1.25rem auto 0; padding: 0 1rem .5rem;
      border-bottom: 1px solid #e5e7eb;
    }
    .blog-header h1 {
      font-family: 'Source Sans 3','Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      font-weight: 700; font-size: clamp(2rem, 4vw, 2.6rem); line-height: 1.1;
      margin: 0 0 .25rem 0; color: #000;
    }
    .blog-header p { font-family: 'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; margin: .25rem 0; color: #111; }
    .back-home { text-decoration: none; } .back-home:hover { text-decoration: underline; }

    .blog-main {
      max-width: 1100px; margin: 0 auto; padding: 1rem 1rem 3rem;
      display: grid; gap: 1rem;
    }
    .post-card {
      border: 1px solid #e5e7eb; border-radius: 12px; padding: 1rem; background: #fff;
      box-shadow: 0 6px 16px rgba(0,0,0,.04);
    }
    .post-card h2 { margin: 0 0 .25rem 0; font-size: clamp(1.25rem, 2.2vw, 1.5rem); }
    .post-card h2 a { color: inherit; text-decoration: none; }
    .post-card h2 a:hover { text-decoration: underline; }
    .meta { color:#555; margin: 0 0 .5rem 0; font-size: .95rem; }
  </style>
</BaseLayout>
