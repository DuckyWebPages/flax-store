---
import type { Product } from "@/data/products";
import { products } from "@/data/products";

// Simple currency formatter
const fmt = (n: number) => n.toLocaleString("en-US", { style: "currency", currency: "USD" });
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Products | Flax Lignan Health</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body class="min-h-screen">
    <main style="max-width:1100px;margin:2rem auto;padding:0 1rem;">
      <h1 style="font-size:2rem;margin-bottom:1rem;">Products</h1>

      <div style="
        display:grid;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 1.25rem;
      ">
        {products.map((p: Product) => (
          <article style="border:1px solid #e5e7eb;border-radius:14px;overflow:hidden;">
            <img src={p.image} alt={p.name} style="width:100%;height:220px;object-fit:cover;" loading="lazy" />
            <div style="padding:1rem;">
              <h2 style="font-size:1.1rem;margin:0 0 0.25rem 0;">{p.name}</h2>
              <div style="font-weight:600;margin:0 0 .5rem 0;">{fmt(p.price)}</div>
              <p style="font-size:.95rem;line-height:1.35;margin:0 0 .75rem 0;white-space:pre-wrap;">
                {p.description}
              </p>

              {
                p.stripePaymentLink ? (
                  <a href={p.stripePaymentLink} rel="noopener noreferrer" style="
                    display:inline-block;
                    text-decoration:none;
                    border:1px solid #111827;
                    padding:.6rem .9rem;
                    border-radius:10px;
                  ">
                    Buy Now
                  </a>
                ) : (
                  <span style="opacity:.7;">Coming soon</span>
                )
              }
            </div>
          </article>
        ))}
      </div>
    </main>
  </body>
</html>
